name: gdrive
namespace: utility_gdrive
label: Google Drive
variant: matatika
pip_url: git+https://github.com/Matatika/utility-gdrive.git@v0.2.0
description: |-
  Utility for downloading files from Google Drive. We recommend using an extractor to move the local files to your destination.

  Please note that these files are not commit to your workspace's repository, so you need to fully process the files you want in a single pipeline run.

  ## Utility settings
  ### GDrive File or Folder ID

  The file or folder ID that you want to sync from Google Drive. If you select a folder it will get all files in the top level of that folder, skipping sub folders.

  You can search for files by typing in this setting field, and the results list updates accordingly.

  You will need to select the file or folder from the list after you have found the one you are looking for, as the results in the list contain additional information that the utility needs.

  ### Output Path

  Optionally provide an output path for the downloaded files to go to.

  ## Learn more

  [Google Drive Utility Documentation](https://github.com/Matatika/utility-gdrive/blob/master/README.md)

logo_url: /assets/images/utility/gdrive.png
commands:
  run:
    args: $GDRIVE_FILE_ID
    description: Run utility-gdrive to download file or folder of files.
settings:
  - name: file_id
    label: GDrive File or Folder ID
    required: true
  - name: output_path
    label: Output Path
    env: GDRIVE_OUTPUT_PATH
  - name: oauth_credentials.authorization_url
    kind: hidden
    label: OAuth identity provider authorization endpoint used create and refresh tokens
    value: https://oauth2.googleapis.com/token
    required: true
  - name: oauth_credentials.scope
    kind: hidden
    label: OAuth scopes we need to request access to
    value: https://www.googleapis.com/auth/drive.readonly
    required: true
  - name: oauth_credentials.refresh_proxy_url
    kind: hidden
    label: Optional - will be called with 'oauth_credentials.refresh_token' to refresh the access token
  - name: oauth_credentials.refresh_proxy_url_auth
    kind: hidden
    label: Optional - Sets Authorization header on 'oauth_credentials.refresh_url' request
  - name: oauth_credentials.client_id
    kind: hidden
    label: Optional - OAuth Client ID used if refresh_proxy_url not supplied
    env: GDRIVE_CLIENT_ID
  - name: oauth_credentials.client_secret
    kind: hidden
    label: Optional - OAuth Client Secret used if refresh_proxy_url not supplied
    env: GDRIVE_CLIENT_SECRET
  - name: oauth_credentials.refresh_token
    kind: hidden
    label: OAuth Refresh Token
    env: GDRIVE_REFRESH_TOKEN
  - name: oauth_credentials.access_token
    kind: hidden
    label: Access Token
    env: GDRIVE_ACCESS_TOKEN
    required: true
